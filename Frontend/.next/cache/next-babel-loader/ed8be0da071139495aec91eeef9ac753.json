{"ast":null,"code":"var _jsxFileName = \"/Users/matejjuric/Desktop/Frontend/pages/login.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { Keycloak } from 'keycloak-js';\nimport { useForm } from \"react-hook-form\";\nimport styles from \"../styles/Login.module.css\";\nimport ErrorMessage from \"../components/ErrorMessage\";\n\nvar Login = function Login() {\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors;\n\n  var _useState = useState(false),\n      showError = _useState[0],\n      setShowError = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      keycloak = _useState2[0],\n      setKeycloak = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      authenticated = _useState3[0],\n      setAuthenticated = _useState3[1];\n\n  function handleLoginClick(data) {\n    /* const user = {\n      username: data.user.username,\n      password: data.user.password\n    };\n    fetch(\"http://localhost:3000/users/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n    })\n      .then(res => res.json())\n      .then(res => {\n        if (res.token) {\n          localStorage.setItem(\"token\", res.token);\n          Router.push(\"/\");\n        } else setShowError(true);\n      })\n      .catch(error => console.log(error)); */\n    console.log(\"Login\");\n    console.log(data);\n  }\n\n  useEffect(function () {// const keycloak = Keycloak('/keycloak.json');\n    // keycloak.init({onLoad: 'login-required'}).then(authenticated => {\n    //   /* this.setState({ keycloak: keycloak, authenticated: authenticated }) */\n    //   console.log(authenticated);\n    // })\n  }, []);\n  return __jsx(\"form\", {\n    className: styles.loginContainer,\n    onSubmit: handleSubmit(handleLoginClick),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: styles.loginTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"Login\"), __jsx(\"input\", {\n    className: styles.loginInput,\n    placeholder: \"Username\",\n    name: \"user.username\",\n    ref: register({\n      required: true\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: styles.mailErrorMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, errors[\"user.username\"] && errors[\"user.username\"].message), __jsx(\"input\", {\n    className: styles.loginInput,\n    placeholder: \"Password\",\n    name: \"user.password\",\n    type: \"password\",\n    ref: register({\n      required: true\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    className: styles.loginButton,\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Login\"), showError ? __jsx(ErrorMessage, {\n    message: \"Wrong username or password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }) : null);\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/matejjuric/Desktop/Frontend/pages/login.js"],"names":["React","useState","useEffect","Keycloak","useForm","styles","ErrorMessage","Login","register","handleSubmit","errors","showError","setShowError","keycloak","setKeycloak","authenticated","setAuthenticated","handleLoginClick","data","console","log","loginContainer","loginTitle","loginInput","required","mailErrorMessage","message","loginButton"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAAA,iBACyBH,OAAO,EADhC;AAAA,MACVI,QADU,YACVA,QADU;AAAA,MACAC,YADA,YACAA,YADA;AAAA,MACcC,MADd,YACcA,MADd;;AAAA,kBAGgBT,QAAQ,CAAC,KAAD,CAHxB;AAAA,MAGXU,SAHW;AAAA,MAGAC,YAHA;;AAAA,mBAIcX,QAAQ,CAAC,EAAD,CAJtB;AAAA,MAIXY,QAJW;AAAA,MAIDC,WAJC;;AAAA,mBAKwBb,QAAQ,CAAC,EAAD,CALhC;AAAA,MAKXc,aALW;AAAA,MAKIC,gBALJ;;AAOlB,WAASC,gBAAT,CAA0BC,IAA1B,EAAgC;AAC9B;;;;;;;;;;;;;;;;;;;;AAoBEC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACH;;AAEDhB,EAAAA,SAAS,CAAC,YAAM,CACd;AACA;AACA;AACA;AACA;AACD,GANQ,EAMN,EANM,CAAT;AAQA,SACE;AACE,IAAA,SAAS,EAAEG,MAAM,CAACgB,cADpB;AAEE,IAAA,QAAQ,EAAEZ,YAAY,CAACQ,gBAAD,CAFxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AAAI,IAAA,SAAS,EAAEZ,MAAM,CAACiB,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAJF,EAKE;AACE,IAAA,SAAS,EAAEjB,MAAM,CAACkB,UADpB;AAEE,IAAA,WAAW,EAAC,UAFd;AAGE,IAAA,IAAI,EAAC,eAHP;AAIE,IAAA,GAAG,EAAEf,QAAQ,CAAC;AACZgB,MAAAA,QAAQ,EAAE;AADE,KAAD,CAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EAaE;AAAK,IAAA,SAAS,EAAEnB,MAAM,CAACoB,gBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGf,MAAM,CAAC,eAAD,CAAN,IAA2BA,MAAM,CAAC,eAAD,CAAN,CAAwBgB,OADtD,CAbF,EAgBE;AACE,IAAA,SAAS,EAAErB,MAAM,CAACkB,UADpB;AAEE,IAAA,WAAW,EAAC,UAFd;AAGE,IAAA,IAAI,EAAC,eAHP;AAIE,IAAA,IAAI,EAAC,UAJP;AAKE,IAAA,GAAG,EAAEf,QAAQ,CAAC;AACZgB,MAAAA,QAAQ,EAAE;AADE,KAAD,CALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,EAyBE;AAAQ,IAAA,SAAS,EAAEnB,MAAM,CAACsB,WAA1B;AAAuC,IAAA,IAAI,EAAC,QAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAzBF,EA4BGhB,SAAS,GACR,MAAC,YAAD;AAAc,IAAA,OAAO,EAAE,4BAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADQ,GAEN,IA9BN,CADF;AAkCD,CA1ED;;AA4EA,eAAeJ,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Keycloak } from 'keycloak-js';\nimport { useForm } from \"react-hook-form\";\nimport styles from \"../styles/Login.module.css\";\nimport ErrorMessage from \"../components/ErrorMessage\";\n\nconst Login = () => {\n  const { register, handleSubmit, errors } = useForm();\n\n  const [showError, setShowError] = useState(false);\n  const [keycloak, setKeycloak] = useState(\"\");\n  const [authenticated, setAuthenticated] = useState(\"\");\n\n  function handleLoginClick(data) {\n    /* const user = {\n      username: data.user.username,\n      password: data.user.password\n    };\n    fetch(\"http://localhost:3000/users/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n    })\n      .then(res => res.json())\n      .then(res => {\n        if (res.token) {\n          localStorage.setItem(\"token\", res.token);\n          Router.push(\"/\");\n        } else setShowError(true);\n      })\n      .catch(error => console.log(error)); */\n      console.log(\"Login\");\n      console.log(data);\n  }\n\n  useEffect(() => {\n    // const keycloak = Keycloak('/keycloak.json');\n    // keycloak.init({onLoad: 'login-required'}).then(authenticated => {\n    //   /* this.setState({ keycloak: keycloak, authenticated: authenticated }) */\n    //   console.log(authenticated);\n    // })\n  }, []);\n\n  return (\n    <form\n      className={styles.loginContainer}\n      onSubmit={handleSubmit(handleLoginClick)}\n    >\n      <h1 className={styles.loginTitle}>Login</h1>\n      <input\n        className={styles.loginInput}\n        placeholder=\"Username\"\n        name=\"user.username\"\n        ref={register({\n          required: true\n        })}\n      />\n      <div className={styles.mailErrorMessage}>\n        {errors[\"user.username\"] && errors[\"user.username\"].message}\n      </div>\n      <input\n        className={styles.loginInput}\n        placeholder=\"Password\"\n        name=\"user.password\"\n        type=\"password\"\n        ref={register({\n          required: true\n        })}\n      />\n      <button className={styles.loginButton} type=\"submit\">\n        Login\n      </button>\n      {showError ? (\n        <ErrorMessage message={\"Wrong username or password\"} />\n      ) : null}\n    </form>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}