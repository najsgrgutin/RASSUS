{"ast":null,"code":"var _jsxFileName = \"/Users/matejjuric/Desktop/Frontend/pages/login.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport Router from \"next/router\";\nimport { useForm } from \"react-hook-form\";\nimport queryString from \"querystring\";\nimport axios from \"axios\";\nimport styles from \"../styles/Login.module.css\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport jwt from \"jsonwebtoken\";\nvar publicKey = \"-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAhdrwpRXz5RKiqClu9IzbGjuLYKnZmsloTd/IAEVpUFbKIRgw6GiTWClxv4d7EMCNx3Kcze9urtrbmd2U0uYLMd1fV6LPqN+uHpZwxa1OviEC95Al2yBt3kLNhbhUr7dx5GrUgaWn7ohFqiH1TvD3XuieP0pyhKMfJExyxAMoZDa4zao4RpWTziLLyHatqM/88IVMvgwmzhp5xlHmSyR7dnHbxfPheO7wwb28wFJAbsKlm94Dl+SB9OduCT12645Gs5byhnMwdboR03lyzzyXeaXCvd3F/a6fmwpjbQxXJek5USh+wVnLLxoNxm48ZCwbXO/9xrkzjXaSqkFcOl6dEwIDAQAB-----END PUBLIC KEY-----\";\nvar clientSecret = \"489eedf0-1ad8-4ebd-bf60-426709339e66\";\nvar grantType = \"password\";\nvar clientId = \"frontend\";\n\nvar Login = function Login() {\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors;\n\n  var _useState = useState(false),\n      showError = _useState[0],\n      setShowError = _useState[1];\n\n  function handleLoginClick(data) {\n    var params = {\n      client_secret: clientSecret,\n      username: data.username,\n      password: data.password,\n      grant_type: grantType,\n      client_id: clientId\n    };\n    axios({\n      method: \"post\",\n      url: \"http://localhost:8080/auth/realms/govanj/protocol/openid-connect/token\",\n      data: queryString.stringify(params),\n      config: {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      }\n    }).then(function (res) {\n      if (res.request.status === 200) {\n        jwt.verify(res.data.access_token, publicKey, function (err, decoded) {\n          if (err) {\n            console.log(\"Token couldn't be verified\");\n          } else {\n            console.log(decoded);\n            localStorage.setItem(\"token\", res.data.access_token);\n            Router.push(\"/mail\");\n          }\n        });\n      } else {\n        console.log(\"Something went wrong\");\n      }\n    })[\"catch\"](function (error) {\n      setShowError(true);\n      console.error(error);\n    });\n  }\n\n  return __jsx(\"form\", {\n    className: styles.loginContainer,\n    onSubmit: handleSubmit(handleLoginClick),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: styles.loginTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Login\"), __jsx(\"input\", {\n    className: styles.loginInput,\n    placeholder: \"Username\",\n    name: \"username\",\n    ref: register({\n      required: true\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: styles.mailErrorMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, errors[\"username\"] && errors[\"username\"].message), __jsx(\"input\", {\n    className: styles.loginInput,\n    placeholder: \"Password\",\n    name: \"password\",\n    type: \"password\",\n    ref: register({\n      required: true\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    className: styles.loginButton,\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Login\"), showError ? __jsx(ErrorMessage, {\n    message: \"Wrong username or password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }) : null);\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/matejjuric/Desktop/Frontend/pages/login.js"],"names":["React","useState","Router","useForm","queryString","axios","styles","ErrorMessage","jwt","publicKey","clientSecret","grantType","clientId","Login","register","handleSubmit","errors","showError","setShowError","handleLoginClick","data","params","client_secret","username","password","grant_type","client_id","method","url","stringify","config","headers","then","res","request","status","verify","access_token","err","decoded","console","log","localStorage","setItem","push","error","loginContainer","loginTitle","loginInput","required","mailErrorMessage","message","loginButton"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Router from \"next/router\";\nimport { useForm } from \"react-hook-form\";\nimport queryString from \"querystring\";\nimport axios from \"axios\";\nimport styles from \"../styles/Login.module.css\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport jwt from \"jsonwebtoken\";\n\nconst publicKey = \"-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAhdrwpRXz5RKiqClu9IzbGjuLYKnZmsloTd/IAEVpUFbKIRgw6GiTWClxv4d7EMCNx3Kcze9urtrbmd2U0uYLMd1fV6LPqN+uHpZwxa1OviEC95Al2yBt3kLNhbhUr7dx5GrUgaWn7ohFqiH1TvD3XuieP0pyhKMfJExyxAMoZDa4zao4RpWTziLLyHatqM/88IVMvgwmzhp5xlHmSyR7dnHbxfPheO7wwb28wFJAbsKlm94Dl+SB9OduCT12645Gs5byhnMwdboR03lyzzyXeaXCvd3F/a6fmwpjbQxXJek5USh+wVnLLxoNxm48ZCwbXO/9xrkzjXaSqkFcOl6dEwIDAQAB-----END PUBLIC KEY-----\";\nconst clientSecret = \"489eedf0-1ad8-4ebd-bf60-426709339e66\";\nconst grantType = \"password\";\nconst clientId = \"frontend\";\n\nconst Login = () => {\n  \n  const { register, handleSubmit, errors } = useForm();\n\n  const [showError, setShowError] = useState(false);\n\n  function handleLoginClick(data) {\n    const params = {\n      client_secret: clientSecret,\n      username: data.username,\n      password: data.password,\n      grant_type: grantType,\n      client_id: clientId\n    };\n\n    axios({\n      method: \"post\",\n      url:\n        \"http://localhost:8080/auth/realms/govanj/protocol/openid-connect/token\",\n      data: queryString.stringify(params),\n      config: {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      }\n    })\n      .then(res => {\n        if (res.request.status === 200) {\n          jwt.verify(res.data.access_token, publicKey, (err, decoded) => {\n            if (err) {\n              console.log(\"Token couldn't be verified\");\n            } else {\n              console.log(decoded);\n              localStorage.setItem(\"token\", res.data.access_token);\n              Router.push(\"/mail\");\n            }\n          });\n        } else {\n          console.log(\"Something went wrong\");\n        }\n      })\n      .catch(error => {\n        setShowError(true);\n        console.error(error);\n      });\n  }\n\n  return (\n    <form\n      className={styles.loginContainer}\n      onSubmit={handleSubmit(handleLoginClick)}\n    >\n      <h1 className={styles.loginTitle}>Login</h1>\n      <input\n        className={styles.loginInput}\n        placeholder=\"Username\"\n        name=\"username\"\n        ref={register({\n          required: true\n        })}\n      />\n      <div className={styles.mailErrorMessage}>\n        {errors[\"username\"] && errors[\"username\"].message}\n      </div>\n      <input\n        className={styles.loginInput}\n        placeholder=\"Password\"\n        name=\"password\"\n        type=\"password\"\n        ref={register({\n          required: true\n        })}\n      />\n      <button className={styles.loginButton} type=\"submit\">\n        Login\n      </button>\n      {showError ? (\n        <ErrorMessage message={\"Wrong username or password\"} />\n      ) : null}\n    </form>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}